<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link type="text/css" rel="stylesheet" href="../libs/qunit.css"/>
    <script type="text/javascript" src="../libs/jquery-1.11.0.js"></script>
    <script type="text/javascript" src="../libs/qunit.js"></script>
    <script type="text/javascript">
        function getPINs(observed) {
            var keypad = [
                '1', '2', '3',
                '4', '5', '6',
                '7', '8', '9',
                null, '0', null
            ];
            var availables = observed.split('').map(function (observed) {
                var pos = keypad.indexOf(observed);
                var top = keypad[pos - 3];
                var left = (pos % 3 && keypad[pos - 1]);
                var right = (((pos + 1) % 3) && keypad[pos + 1]);
                var bottom = keypad[pos + 3];
                return [  left, top, observed, right, bottom].filter(Boolean);
            });
            return (function discovery(solution) {
                var concat = [].concat;
                var which = availables.shift();
                try {
                    return concat.apply([], which.map(function (item) {
                        solution.push(item);
                        try {
                            return availables.length && concat.apply([], discovery(solution)) || solution.join('');
                        } finally {
                            solution.pop();
                        }
                    }));
                } finally {
                    availables.unshift(which);
                }
            })([]);

        }
    </script>
    <script type="text/javascript">
        module('the observed pin');
        test('one adjacent digit', function () {
            deepEqual(getPINs('0').sort(), ['0', '8']);
        });

        test('two adjacent digits', function () {
            deepEqual(getPINs('1').sort(), ['1', '2', '4']);
            deepEqual(getPINs('3').sort(), ['2', '3', '6']);
            deepEqual(getPINs('7').sort(), ['4', '7', '8']);
            deepEqual(getPINs('9').sort(), ['6', '8', '9']);
        });

        test('has all adjacent digits', function () {
            deepEqual(getPINs('5').sort(), ['2', '4', '5', '6', '8']);
        });

        test('two observed', function () {
            deepEqual(getPINs('11').sort(), ["11", "12", "14", "21", "22", "24", "41", "42", "44"]);
        });

        test('complex observed pins',function(){
            deepEqual(getPINs('00000000').sort(),["00000000","00000008","00000080","00000088","00000800","00000808","00000880","00000888","00008000","00008008","00008080","00008088","00008800","00008808","00008880","00008888","00080000","00080008","00080080","00080088","00080800","00080808","00080880","00080888","00088000","00088008","00088080","00088088","00088800","00088808","00088880","00088888","00800000","00800008","00800080","00800088","00800800","00800808","00800880","00800888","00808000","00808008","00808080","00808088","00808800","00808808","00808880","00808888","00880000","00880008","00880080","00880088","00880800","00880808","00880880","00880888","00888000","00888008","00888080","00888088","00888800","00888808","00888880","00888888","08000000","08000008","08000080","08000088","08000800","08000808","08000880","08000888","08008000","08008008","08008080","08008088","08008800","08008808","08008880","08008888","08080000","08080008","08080080","08080088","08080800","08080808","08080880","08080888","08088000","08088008","08088080","08088088","08088800","08088808","08088880","08088888","08800000","08800008","08800080","08800088","08800800","08800808","08800880","08800888","08808000","08808008","08808080","08808088","08808800","08808808","08808880","08808888","08880000","08880008","08880080","08880088","08880800","08880808","08880880","08880888","08888000","08888008","08888080","08888088","08888800","08888808","08888880","08888888","80000000","80000008","80000080","80000088","80000800","80000808","80000880","80000888","80008000","80008008","80008080","80008088","80008800","80008808","80008880","80008888","80080000","80080008","80080080","80080088","80080800","80080808","80080880","80080888","80088000","80088008","80088080","80088088","80088800","80088808","80088880","80088888","80800000","80800008","80800080","80800088","80800800","80800808","80800880","80800888","80808000","80808008","80808080","80808088","80808800","80808808","80808880","80808888","80880000","80880008","80880080","80880088","80880800","80880808","80880880","80880888","80888000","80888008","80888080","80888088","80888800","80888808","80888880","80888888","88000000","88000008","88000080","88000088","88000800","88000808","88000880","88000888","88008000","88008008","88008080","88008088","88008800","88008808","88008880","88008888","88080000","88080008","88080080","88080088","88080800","88080808","88080880","88080888","88088000","88088008","88088080","88088088","88088800","88088808","88088880","88088888","88800000","88800008","88800080","88800088","88800800","88800808","88800880","88800888","88808000","88808008","88808080","88808088","88808800","88808808","88808880","88808888","88880000","88880008","88880080","88880088","88880800","88880808","88880880","88880888","88888000","88888008","88888080","88888088","88888800","88888808","88888880","88888888"]);
        });
    </script>
</head>
<body>
<div id="qunit"></div>
</body>
</html>